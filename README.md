# Space Photos Scripts
Набор скриптов, предназначенный для скачивания фотографий космоса от SpaceX и NASA и публикации их в телеграм канале.

## Установка Python и зависимостей

Скрипты тестировались на версии Python 3.11.4 и могут некорректно работать на более поздних версиях. 
Для Windows и Mac нужную версию можно скачать по [ссылке](https://www.python.org/downloads/release/python-3114/).
Для Linux установка альтернативной версии Python осуществляется средствами [pyenv](https://github.com/pyenv/pyenv).

Также, потребуется установить зависимости, используя команду `pip` или `pip3` (в случае, если на компьютере установлены одновременно 2 и 3 версии Python).

Установка зависимостей:

```
pip install -r requirements.txt
```

## Переменные окружения

Для корректной работы скриптов создайте файл с именем `.env` и поместите в него следующие данные:

* NASA_API_KEY – API-ключ NASA можно получить по [ссылке](https://api.nasa.gov/)
* TG_BOT_TOKEN – Создание бота и получение токена от него делается с помощью [BotFather бота](https://t.me/BotFather) Подробнее в официальной [инструкции](https://core.telegram.org/bots/tutorial#getting-ready).
* TG_CHANNEL_ID – Создать свой канал можно прямо в клиенте Telegram. Чтобы получить его id, можно воспользоваться ботом [IDBot](https://t.me/username_to_id_bot)
* POSTING_DELAY – Служит для настройки задержки между публикацией изображений в канале. Если переменную не указывать, то будет использовано значение по умолчанию 240 минут (4 часа)

Файлы с расширением `.env` поддерживают комментарии. Они начинаются знаком `#`. Вы можете указать туда дополнительную информацию для себя.

Пример содержания файла:

```
#Обязательные переменные
NASA_API_KEY=ваш_апи_ключ_nasa
TG_BOT_TOKEN=ваш_токен_от_телеграм_бота
TG_CHANNEL_ID=айди_вашего_канала
#Необязательная переменная. Задержка в минутах для публикации в телеграм канал
POSTING_DELAY=240
```

## fetch_apod_images.py
Загружает фотографии дня NASA. Для работы необходим API-ключ NASA. Получить его можно по [ссылке](https://api.nasa.gov/).

Необходимо указать два обязательных позиционных аргумента:
* API-ключ
* Количество загружаемых снимков

Также, можно указать отдельную папку, используя флаг '-f'. Если её не указывать, то изображения сохранятся в папке `images/nasa`.

Пример команды для запуска скрипта без указания папки:

```
python fetch_apod_images.py uH3lN9d7KF0bFeWLaaKJt7P4kDctJrb04tX34joa 3
```

И с использованием флага для папки:

```
python fetch_apod_images.py uH3lN9d7KF0bFeWLaaKJt7P4kDctJrb04tX34joa 3 -f /images/apod
```

_Указанный выше API-ключ не работает, вам придется создавать свой_ 


## fetch_epic_images.py
Загружает фотографии Земли с проекта EPIC от NASA. Получить его можно по [ссылке](https://api.nasa.gov/).

Необходимо указать два обязательных позиционных аргумента:
* API-ключ
* Лимит снимков. Если в выбранную дату снимков будет больше указанного лимита, то загрузится только N первых снимков.

Также, можно указать два необязательных:
* Альтернативная папка для сохранения с флагом `-f`. Если её не указывать, то изображения сохранятся в папке `images/nasa`.
* Дата в формате `YYYY-mm-DD` с флагом `-d`. Если её не указывать, то скачаются изображения самой последней доступной даты.

Пример команды для запуска скрипта без указания папки и даты:

```
python fetch_epic_images.py uH3lN9d7KF0bFeWLaaKJt7P4kDctJrb04tX34joa 3
```

И с использованием флагов для папки и даты:

```
python fetch_epic_images.py uH3lN9d7KF0bFeWLaaKJt7P4kDctJrb04tX34joa 3 -f /images/epic -d 2023-11-11
```

_Указанный выше API-ключ не работает, вам придется создавать свой_ 


## fetch_spacex_images.py
Загружает фотографии запусков ракет SpaceX.

Имеет два необязательных флага:
* `-f` позволяет выбрать альтернативную папку для сохранения изображений. Если не указан, то изображения сохраняются в `images/spacex`
* `-L` позволяет указать id запуска, фотографии которого необходимо скачать. Если не указан, то скачиваются фотографии самого последнего запуска, у которого они есть

Пример запуска скрипта с флагами:

```
python fetch_spacex_images.py -f /spacex_launches -L 5eb87d47ffd86e000604b38a
```
И без флагов:

```
python fetch_spacex_images.py
```

## post_image_to_telegram_channel.py
Выкладывает одно изображение в канал телеграма. Для работы необходим созданный бот, его токен и канал телеграма, администратором которого будет бот. Подробнее о том, как получить токен бота и id канала в описании [переменной окружения](#переменные-окружения).

При использовании флага `-i` можно указать путь к изображению, которое хотите опубликовать в телеграме. Если его не указывать, то опубликуется случайное изображение.

Пример запуска скрипта с флагом:

```
python fetch_spacex_images.py -i /images/nasa/image.png
```

И без флага:

```
python fetch_spacex_images.py
```

## post_images_to_telegram_forever.py
Выкладывает изображения в случайном порядке, пока не будет отключен. Для работы необходим созданный бот, его токен и канал телеграма, администратором которого будет бот. Подробнее о том, как получить токен бота и id канала в описании [переменной окружения](#переменные-окружения).

При использовании флага `-d` можно указать задержку в минутах, с которой будут публиковаться изображения. Если её не указывать, то будет публиковать с задержкой в 240 минут (4 часа).

Пример запуска скрипта с задержкой:

```
python post_images_to_telegram_forever.py -d 120
```

И без задержки:

```
python post_images_to_telegram_forever.py
```

