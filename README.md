# Space Photos Scripts
Набор скриптов, предназначенный для скачивания фотографий космоса от SpaceX и NASA и публикации их в телеграм канале.

## Установка Python и зависимостей

Скрипты тестировались на версии Python 3.11.4 и могут некорректно работать на более поздних версиях. 
Для Windows и Mac нужную версию можно скачать по [ссылке](https://www.python.org/downloads/release/python-3114/).
Для Linux установка альтернативной версии Python осуществляется средствами [pyenv](https://github.com/pyenv/pyenv).

Также, потребуется установить зависимости, используя команду `pip` или `pip3` (в случае, если на компьютере установлены одновременно 2 и 3 версии Python).

Установка зависимостей:

```
pip install -r requirements.txt
```

## Переменные окружения

Для корректной работы скриптов создайте файл с именем `.env` и поместите в него следующие данные:

* NASA_API_KEY – API-ключ NASA можно получить по [ссылке](https://api.nasa.gov/)
* TG_BOT_TOKEN – Создание бота и получение токена от него делается с помощью [BotFather бота](https://t.me/BotFather) Подробнее в официальной [инструкции](https://core.telegram.org/bots/tutorial#getting-ready).
* TG_CHANNEL_ID – Создать свой канал можно прямо в клиенте Telegram. Чтобы получить его id, можно воспользоваться ботом [IDBot](https://t.me/username_to_id_bot)
* POSTING_DELAY – Служит для настройки задержки между публикацией изображений в канале. Если переменную не указывать, то будет использовано значение по умолчанию 240 минут (4 часа)

Файлы с расширением `.env` поддерживают комментарии. Они начинаются знаком `#`. Вы можете указать туда дополнительную информацию для себя.

Пример содержания файла:

```
#Обязательные переменные
NASA_API_KEY=ваш_апи_ключ_nasa
TG_BOT_TOKEN=ваш_токен_от_телеграм_бота
TG_CHANNEL_ID=айди_вашего_канала
#Необязательная переменная. Задержка в минутах для публикации в телеграм канал
POSTING_DELAY=240
```

## fetch_apod_images.py
Загружает фотографии дня NASA. Для работы необходим API-ключ NASA. Получить его можно по [ссылке](https://api.nasa.gov/).

Необязательные флаги:
* `-a`, `--api_key` – позволяет указать API-ключ NASA. По умолчанию используется ключ из переменной окружения
* `-c`, `--count` – определяет, сколько именно снимков будет запрошено. Значение по умолчанию: 3
* `-f`, `--folder` – позволяет указать папку для сохранения снимков. По умолчанию сохраняет в `images/nasa`

Пример команды для запуска скрипта без использования флагов:

```
python fetch_apod_images.py
```

И с использованием всех флагов:

```
python fetch_apod_images.py -a uH3lN9d7KF0bFeWLaaKJt7P4kDctJrb04tX34joa -c 5 -f /images/apod
```

_Указанный выше API-ключ не работает, вам придется создать свой_ 


## fetch_epic_images.py
Загружает фотографии Земли с проекта EPIC от NASA. Получить его можно по [ссылке](https://api.nasa.gov/).

Необязательные флаги:
* `-a`, `--api_key` – позволяет указать API-ключ NASA. По умолчанию используется ключ из переменной окружения
* `-L`, `--limit` – позволяет указать лимит снимков. Если в выбранную дату снимков будет больше указанного лимита, то загрузится только N первых снимков
* `-d`, `--date` – позволяет указать дату в формате `YYYY-mm-dd`, снимки которой хотите загрузить. По умолчанию будут скачаны снимки за последний доступный день
* `-f`, `--folder` – позволяет указать папку для сохранения снимков. По умолчанию сохраняет в `images/nasa`

Пример команды для запуска скрипта без использования флагов:

```
python fetch_epic_images.py
```

И с использованием всех флагов:

```
python fetch_epic_images.py -a uH3lN9d7KF0bFeWLaaKJt7P4kDctJrb04tX34joa -c 3 -f /images/epic -d 2023-11-11
```

_Указанный выше API-ключ не работает, вам придется создать свой_ 


## fetch_spacex_images.py
Загружает фотографии запусков ракет SpaceX.

Необязательные флаги:
* `-L`, `--launch_id` – позволяет указать id запуска, фотографии которого необходимо скачать. Если не указан, то скачиваются фотографии самого последнего запуска
* `-f`, `--folder` – позволяет указать папку для сохранения снимков. По умолчанию сохраняет в `images/spacex`

Пример команды для запуска скрипта без использования флагов:

```
python fetch_spacex_images.py
```

И с использованием всех флагов:

```
python fetch_spacex_images.py -f /spacex_launches -L 5eb87d47ffd86e000604b38a
```

## post_image_to_telegram_channel.py
Выкладывает одно изображение в канал телеграма. Для работы необходим созданный бот, его токен и канал телеграма, администратором которого будет бот. Подробнее о том, как получить токен бота и id канала в описании [переменной окружения](#переменные-окружения).

Необязательные флаги:
* `-i`, `--image` – позволяет указать путь к изображению, которое хотите опубликовать в телеграме. По умолчанию публикуется случайное изображение

Пример команды для запуска скрипта без использования флагов:

```
python post_image_to_telegram_channel.py
```

И с использованием всех флагов:

```
python post_image_to_telegram_channel.py -i /images/spacex/51170251791_9b36fba5b7_o.jpg
```

## post_images_to_telegram_forever.py
Выкладывает изображения в случайном порядке, пока не будет отключен. Для работы необходим созданный бот, его токен и канал телеграма, администратором которого будет бот. Подробнее о том, как получить токен бота и id канала в описании [переменной окружения](#переменные-окружения).

Необязательные флаги:
* `-d`, `--delay` – позволяет указать задержку в минутах, с которой будут публиковаться изображения. По умолчанию стоит задержка 240 минут (4 часа)

Пример команды для запуска скрипта без использования флагов:

```
python post_images_to_telegram_forever.py
```

И с использованием всех флагов:

```
python post_images_to_telegram_forever.py -d 120
```
